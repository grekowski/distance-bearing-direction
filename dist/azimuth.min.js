!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).azimuth=n()}(this,(function(){const t=6371009;function n(t){return t*(Math.PI/180)}function r(t){return t*(180/Math.PI)}Number.prototype.round=function(t=0){const n=new Number(this.valueOf());return+(Math.round(n+"e+"+t)+"e-"+t)};return function(e,a,{units:o="m",distancePrecision:i=0,formula:s="great-circle",azimuthPrecision:u=0,directionPrecision:h=2}={}){if([e,a].forEach((t=>{if(!t.hasOwnProperty("lat")||!t.hasOwnProperty("lng"))throw new Error("Latitude/Longitude property missing!");if(isNaN(t.lat)||isNaN(t.lng))throw new Error("Latitude/Longitude property must be a number!");if(Math.abs(t.lat)>90||Math.abs(e.lng)>180)throw new Error("Latitude/Longitude property exceeding maximal value!")})),!["m","km","ft","yd","mi","nm"].includes(o))throw new Error("Units parameter type not supported!");if(isNaN(i)||isNaN(u)||i>15||u>15)throw new Error("Precision parameter is not a number or exceeds it's maximum value of 15!");if(!["great-circle","rhumb-line"].includes(s))throw new Error("Calculation formula type parameter not supported!");if(![0,1,2,3,"0","1","2","3"].includes(h))throw new Error("Compass precision parameter not supported!");let c={};const l=function(t,n="m"){if("m"===n)return t;switch(n){case"km":return.001*t;case"ft":return 3.28084*t;case"yd":return 1.0936*t;case"mi":return 621371e-9*t;case"nm":return 539957e-9*t;default:return t}}("rhumb-line"===s?function(r,e,a,o){if(r===a&&e===o)return 0;const i=n(r),s=n(a),u=n(r-a);let h=n(e-o);const c=Math.log(Math.tan(Math.PI/4+s/2)/Math.tan(Math.PI/4+i/2)),l=Math.abs(c)>1e-11?u/c:Math.cos(i);return Math.abs(h)>Math.PI&&(h=h>0?-(2*Math.PI-h):2*Math.PI+h),Math.sqrt(u*u+l*l*h*h)*t}(e.lat,e.lng,a.lat,a.lng):function(r,e,a,o){if(r===a&&e===o)return 0;const i=n(r),s=n(a),u=n(r-a),h=n(e-o),c=Math.sin(u/2)*Math.sin(u/2)+Math.cos(i)*Math.cos(s)*Math.sin(h/2)*Math.sin(h/2),l=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c));return t*l}(e.lat,e.lng,a.lat,a.lng),o).round(i);c.distance=l,c.units=o;const f=0===l?"":("rhumb-line"===s?function(t,e,a,o){if(t===a&&e===o)return 0;const i=n(t),s=n(a);let u=n(o-e);const h=Math.log(Math.tan(Math.PI/4+s/2)/Math.tan(Math.PI/4+i/2));return Math.abs(u)>Math.PI&&(u=u>0?-(2*Math.PI-u):2*Math.PI+u),(r(Math.atan2(u,h))+360)%360}(e.lat,e.lng,a.lat,a.lng):function(t,e,a,o){const i=n(t),s=n(a),u=n(o-e),h=Math.sin(u)*Math.cos(s),c=Math.cos(i)*Math.sin(s)-Math.sin(i)*Math.cos(s)*Math.cos(u);return(r(Math.atan2(h,c))+360)%360}(e.lat,e.lng,a.lat,a.lng)).round(u);return c.azimuth=f,c.formula=s,0!=h&&(c.direction=0===l?"":function(t,n){if(isNaN(t)||isNaN(n))throw new Error("Parameter is not a number!");if(t<0||t>360)throw new Error("Parameter outside of range!");if(n<1||n>3)throw new Error("Parameter outside of range!");const r=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"];let e=4;2==n&&(e=8),3==n&&(e=16);const a=360/e,o=r.length/e;let i=Math.round(t/a)*o;return i>=r.length&&(i=0),r[i]}(f,h)),c}}));