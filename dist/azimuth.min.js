!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t=t||self).azimuth=r()}(this,(function(){const t=6371009;function r(t){return t*(Math.PI/180)}function e(t){return t*(180/Math.PI)}Number.prototype.round=function(t=0){const r=new Number(this.valueOf());return+(Math.round(r+"e+"+t)+"e-"+t)};return function(n,a,i,o,{units:s="m",distancePrecision:u=0,formula:h="great-circle",bearingPrecision:c=0,directionPrecision:M=2}={}){if(isNaN(n)||isNaN(i)||isNaN(a)||isNaN(o)||isNaN(c)||isNaN(M))throw new Error("Latitude/Longitude parameter is not a number!");if(Math.abs(n)>90||Math.abs(i)>90||Math.abs(a)>180||Math.abs(o)>180)throw new Error("Latitude/Longitude parameter exceeding maximal value!");if(isNaN(u)||isNaN(c)||u>15||c>15)throw new Error("Precision parameter is not a number or exceeds it's maximum value of 15!");if(!["m","km","ft","yd","mi","nm"].includes(s))throw new Error("Units parameter type not supported!");if(!["great-circle","rhumb-line"].includes(h))throw new Error("Calculation formula type parameter not supported!");let f={};const m=function(t,r="m"){if("m"===r)return t;switch(r){case"km":return.001*t;case"ft":return 3.28084*t;case"yd":return 1.0936*t;case"mi":return 621371e-9*t;case"nm":return 539957e-9*t;default:return t}}("rhumb-line"===h?function(e,n,a,i){if(e===a&&n===i)return 0;const o=r(e),s=r(a),u=r(e-a);let h=r(n-i);const c=Math.log(Math.tan(Math.PI/4+s/2)/Math.tan(Math.PI/4+o/2)),M=Math.abs(c)>1e-11?u/c:Math.cos(o);return Math.abs(h)>Math.PI&&(h=h>0?-(2*Math.PI-h):2*Math.PI+h),Math.sqrt(u*u+M*M*h*h)*t}(n,a,i,o):function(e,n,a,i){if(e===a&&n===i)return 0;const o=r(e),s=r(a),u=r(e-a),h=r(n-i),c=Math.sin(u/2)*Math.sin(u/2)+Math.cos(o)*Math.cos(s)*Math.sin(h/2)*Math.sin(h/2),M=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c));return t*M}(n,a,i,o),s).round(u);f.distance=m,f.units=s;const d=0===m?"":("rhumb-line"===h?function(t,n,a,i){if(t===a&&n===i)return 0;const o=r(t),s=r(a);let u=r(i-n);const h=Math.log(Math.tan(Math.PI/4+s/2)/Math.tan(Math.PI/4+o/2));return Math.abs(u)>Math.PI&&(u=u>0?-(2*Math.PI-u):2*Math.PI+u),(e(Math.atan2(u,h))+360)%360}(n,a,i,o):function(t,n,a,i){const o=r(t),s=r(a),u=r(i-n),h=Math.sin(u)*Math.cos(s),c=Math.cos(o)*Math.sin(s)-Math.sin(o)*Math.cos(s)*Math.cos(u);return(e(Math.atan2(h,c))+360)%360}(n,a,i,o)).round(c);return f.bearing=d,f.formula=h,0!==M&&(f.direction=0===m?"":function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Parameter is not a number!");if(t<0||t>360)throw new Error("Parameter outside of range!");if(r<1||r>3)throw new Error("Parameter outside of range!");const e=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"];let n=4;2===r&&(n=8),3===r&&(n=16);let a=360/n,i=e.length/n,o=Math.round(t/a)*i;return o>=e.length&&(o=0),e[o]}(d,M)),f}}));